
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Development: Documentation &#8212; Topics and Summary  documentation</title>
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Future Improvements" href="future-improvements.html" />
    <link rel="prev" title="Development: API" href="api.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="future-improvements.html" title="Future Improvements"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="api.html" title="Development: API"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Topics and Summary  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../development.html" accesskey="U">Development</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="development-documentation">
<span id="id1"></span><h1>Development: Documentation<a class="headerlink" href="#development-documentation" title="Permalink to this headline">¶</a></h1>
<p>This page explains how to <strong>modify the documentation</strong>.</p>
<p>The documentation is generated using the library <a class="reference external" href="http://www.sphinx-doc.org/en/master/">sphinx</a>,
which uses <a class="reference external" href="https://es.wikipedia.org/wiki/ReStructuredText">reStructuredText</a> as its markup language,
and supports the following output formats:</p>
<ul class="simple">
<li><p>HTML</p></li>
<li><p>LaTeX</p></li>
<li><p>ePub</p></li>
<li><p>Texinfo</p></li>
<li><p>Manual pages</p></li>
<li><p>Plain text</p></li>
</ul>
<p>Apart of the documentation, a good start point is this <a class="reference external" href="http://openalea.gforge.inria.fr/doc/openalea/doc/_build/html/source/sphinx/rest_syntax.html">CheatSheet</a>.</p>
<div class="section" id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<p>The required version of the sphinx library is present in the <strong>development-requirements.txt</strong> file,
which content is showed in the <a class="reference internal" href="installation.html"><span class="doc">Development Installation</span></a> page.</p>
<p>To modify the documentation, in addition to have installed the sphinx library <strong>is also required to have installed
the topics_and_summary library</strong> <a class="footnote-reference brackets" href="#f1" id="id2">1</a>.</p>
<p>The instructions for installing both (sphinx and the library) are included in the <a class="reference internal" href="installation.html"><span class="doc">Development Installation</span></a> page.</p>
</div>
<div class="section" id="how-to-modify-the-documentation">
<h2>How to modify the documentation<a class="headerlink" href="#how-to-modify-the-documentation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="directory-structure-and-important-files">
<h3>Directory structure and important files<a class="headerlink" href="#directory-structure-and-important-files" title="Permalink to this headline">¶</a></h3>
<p>All the documentation files are in the <strong>&lt;project-root-folder&gt;/topics_and_summary/docs folder</strong>. The most important elements of the folder are:</p>
<ul>
<li><p><strong>build</strong> folder: Contains the documentation in the output formats specified with the make command (HTML, …)</p></li>
<li><dl>
<dt><strong>source</strong> folder: Contains the source files of the documentation.</dt><dd><ul>
<li><p><strong>_api-non-autogenerated-files</strong> folder contains txt files that substitute the content of the specified .rst files
generated by generate-api-doc.sh. The name of the files must be the same as the name of the api file to be substituted,
but the extension must be .txt to avoid sphinx triying to use them. A line like the showed below must be included in the
generate-api-doc.sh file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="n">_api</span><span class="o">-</span><span class="n">non</span><span class="o">-</span><span class="n">autogenerated</span><span class="o">-</span><span class="n">files</span><span class="o">/&lt;</span><span class="n">file</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;.</span><span class="n">txt</span> <span class="o">&gt;</span> <span class="n">api</span><span class="o">/&lt;</span><span class="n">file</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;.</span><span class="n">rst</span>
</pre></div>
</div>
</li>
</ul>
</dd>
</dl>
</li>
<li><p><strong>generate-api-doc.sh</strong>: Generates the automatic documentation of the api of the project,
using <a class="reference external" href="http://www.sphinx-doc.org/es/stable/man/sphinx-apidoc.html">sphinx-apidoc</a>. It also substitutes the content
of the files specified in _api-non-autogenerated-files, as described in the point above, and removes the lines 3-10
of the package files of the api, to avoid having an extra header <a class="footnote-reference brackets" href="#f3" id="id3">3</a>.</p></li>
</ul>
</div>
<div class="section" id="generate-html-files">
<h3>Generate HTML files<a class="headerlink" href="#generate-html-files" title="Permalink to this headline">¶</a></h3>
<p>After generating them, the HTML files will be stored in the <strong>&lt;project-root-folder&gt;/topics_and_summary/docs/build/html</strong> folder.</p>
<div class="section" id="no-changes-in-api">
<h4>No changes in API<a class="headerlink" href="#no-changes-in-api" title="Permalink to this headline">¶</a></h4>
<p>If there are no changes in the API source code, to generate the HTML files of the documentation follow this steps:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">&lt;</span><span class="n">project</span><span class="o">-</span><span class="n">root</span><span class="o">-</span><span class="n">folder</span><span class="o">&gt;/</span><span class="n">topics_and_summary</span><span class="o">/</span><span class="n">docs</span>
<span class="n">make</span> <span class="n">html</span>
</pre></div>
</div>
</div>
<div class="section" id="changes-in-api">
<h4>Changes in API<a class="headerlink" href="#changes-in-api" title="Permalink to this headline">¶</a></h4>
<p>If there are changes in the API source code, to generate the HTML files of the documentation follow this steps:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">&lt;</span><span class="n">project</span><span class="o">-</span><span class="n">root</span><span class="o">-</span><span class="n">folder</span><span class="o">&gt;/</span><span class="n">topics_and_summary</span><span class="o">/</span><span class="n">docs</span>
<span class="o">./</span><span class="n">generate</span><span class="o">-</span><span class="n">api</span><span class="o">-</span><span class="n">doc</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>If a new python package is added</strong> to the source code (i.e. a topics_and_summary.package folder with __init__.py file),
a line like the one below must be added to the <strong>generate-api-doc.sh</strong> file before executing it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sed</span> <span class="o">-</span><span class="n">i</span><span class="s1">&#39;.original&#39;</span> <span class="o">-</span><span class="n">e</span> <span class="s1">&#39;3,10d&#39;</span> <span class="n">api</span><span class="o">/</span><span class="n">topics_and_summary</span><span class="o">.&lt;</span><span class="n">package</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;.</span><span class="n">rst</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="style">
<h3>Style<a class="headerlink" href="#style" title="Permalink to this headline">¶</a></h3>
<p>The default html theme is ‘nature’, which is the same as the one used in the <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/index.html">pandas documentation</a>
To change the theme, the following variable in the <strong>conf.py</strong> file have to be changed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">html_theme</span> <span class="o">=</span> <span class="s1">&#39;nature&#39;</span>
</pre></div>
</div>
<p>Posible values are described in the <a class="reference external" href="https://sphinx-themes.org">sphinx-theme page</a>.</p>
</div>
<div class="section" id="warnings">
<h3>Warnings<a class="headerlink" href="#warnings" title="Permalink to this headline">¶</a></h3>
<p>After using the generate-api-doc.sh to update the API documentation, sphinx
can give warnings if some of the .rst files are not included in any toctree.</p>
<p>Currently, the topics_and_summary.rst file is not included in any toctree,
because with the modules.rst is considered enough to show the packages and
modules of the library.</p>
<p>For that reason, sphinx gives the following warning:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>api/topics_and_summary.rst: WARNING: document isn&#39;t included in any toctree
</pre></div>
</div>
<p>This warning can be ignored, because this file isn’t included intentionally.</p>
<p class="rubric">Footnotes</p>
<dl class="footnote brackets">
<dt class="label" id="f1"><span class="brackets"><a class="fn-backref" href="#id2">1</a></span></dt>
<dd><p>The documentation can’t be generated directly using the content of the modules in the source code, because
the source code includes the name of the library in all the imports that refer to modules of the own library <a class="footnote-reference brackets" href="#f2" id="id4">2</a>
(this is needed to allow the project to be converted into an installable library without problems in the imports),
and this causes problems while trying to generate the documentation using the source code. So the solution is to
install the library and obtain the code from that installed library.</p>
</dd>
<dt class="label" id="f2"><span class="brackets"><a class="fn-backref" href="#id4">2</a></span></dt>
<dd><p>For example: from <strong>topics_and_summary</strong>.datasets.common import get_file_content, Document, Dataset</p>
</dd>
<dt class="label" id="f3"><span class="brackets"><a class="fn-backref" href="#id3">3</a></span></dt>
<dd><p>This avoids having a toctree with unuseful elements like ‘submodules’ header.</p>
</dd>
</dl>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="../index.html">Table of Contents</a></h3>
<p class="caption"><span class="caption-text">Documentation contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api-reference.html">API Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../development.html">Development</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="installation.html">Development Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html">Development: API</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Development: Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="future-improvements.html">Future Improvements</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="api.html"
                        title="previous chapter">Development: API</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="future-improvements.html"
                        title="next chapter">Future Improvements</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="future-improvements.html" title="Future Improvements"
             >next</a> |</li>
        <li class="right" >
          <a href="api.html" title="Development: API"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Topics and Summary  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../development.html" >Development</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Carlos Sanabria Miranda.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.0.1.
    </div>
  </body>
</html>